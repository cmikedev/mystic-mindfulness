{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="overlay"></div>
    <div style="text-align: center;">
        <br/><br/>
        <h1 style="font-family: Bilbo;">{{ post.title }}</h1>
        <small>By: {{ post.author }}</small><br/>
        {% if request.user.is_superuser %}
            <div>
                <br/>
                <a href="{% url 'edit_post' post.pk %}">Edit Post</a> | 
                <a class="text-danger" href="{% url 'delete_post' post.pk %}">Delete Post</a>
            </div>
        {% endif %}
        <br/>
        <div class="blog-image-container">
            {% if post.image %}
                <a href="{{ post.image.url }}" target="_blank">
                    <img class="img-fluid" src="{{ post.image.url }}" alt="{{ post.name }}">
                </a>
            {% else %}
                <a href="">
                    <img class="img-fluid" src="{{ MEDIA_URL }}noimage.png" alt="{{ post.name }}">
                </a>
            {% endif %}
        </div>
        <hr>
        <br/>
    </div>
    {{ post.body|safe }}
    <br/>
    <hr>
    
    <br/><br/> 

    <h2 style="font-family: Bilbo;">Comments...</h2>
    <br>
    {% if user.is_authenticated %}
        <a href="{% url 'add_comment' post.pk %}" aria-label="Comment">Leave a comment</a>
        <br>
    {% else %}
        <p>
            You must be signed-in to comment. Please 
            <a href="{% url 'account_login' %}" aria-label="Sign in to acount">sign in</a> or 
            <a href="{% url 'account_signup' %}" aria-label="Register an account">register</a>
        </p>
    {% endif %}
    <br>
    {% if not post.comments.all %}
        No comments yet...Be the first to comment!
        <br><br>
    {% else %}
        {% for comment in post.comments.all %}
            <strong>
                {{comment.name}} - 
                {{comment.date_added}}
            </strong>
            <br>
            {{comment.body|safe}}
            <br><br>
        {% endfor %}
    {% endif %}
    {% if user.is_authenticated %}
        <a href="{% url 'add_comment' post.pk %}" aria-label="Comment">Leave a comment</a>
        <br>
    {% endif %}
    <div>
        <br/>
        <a href="{% url 'blog' %}" class="btn btn-outline-black">Back</a>
        <br/>
    </div> 

{% endblock %}